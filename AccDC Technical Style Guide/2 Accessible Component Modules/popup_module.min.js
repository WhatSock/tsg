/*
Popup Module R1.7
Copyright 2010-2018 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setPopup=function(b){if(b&&!b.id){b.id=$A.genId()}if(typeof b.mode!=="number"){b.source=(function(){var c=$A.createEl("div");$A.load(c,b.source);return c})()}$A([b],{role:"Popup",bind:"click",isToggle:true,forceFocus:true,accStart:"Start",accEnd:"End",accClose:"Close",autoPosition:3,cssObj:{position:"absolute"},allowCascade:true,click:function(d,c){d.stopPropagation()},runDuring:function(c){c.popupLoaded=false;if(!c.preventAutoClose){$A.bind("body","click.popup",function(d){if(c.popupLoaded){c.close()}})}$A.bind(window,"resize.popup",function(){c.setPosition()});if(c.role.replace(/^\s+|\s+$/g,"")){$A.setAttr(c.accDCObj,{role:"region","aria-label":c.role})}c.fn.sraStart.innerHTML=c.fn.sraEnd.innerHTML="";$A.setAttr(c.fn.sraStart,{"aria-hidden":"true"});$A.setAttr(c.fn.sraEnd,{"aria-hidden":"true"})},announce:true,runAfter:function(c){$A.setAttr(c.triggerObj,"aria-expanded","true");setTimeout(function(){c.popupLoaded=true},750)},runAfterClose:function(c){$A.setAttr(c.triggerObj,"aria-expanded","false");$A.unbind(window,".popup");$A.unbind("body",".popup")},keyDown:function(e,c){var d=e.which||e.keyCode;if(d==27){c.close();e.stopPropagation()}},className:"popup",closeClassName:"popupClose"},true);var a=typeof b.trigger==="string"?$A.query(b.trigger)[0]:b.trigger.nodeType?b.trigger:null;if(a){$A.setAttr(a,"aria-expanded","false")}return b.id}})();