/*
ARIA Slider Module R1.2
Copyright 2010-2013 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
	*/
(function(){$A.setSlider=function(d,b){var a=$A.getEl(d),c=a.parentNode,b=b||{};$A.morph(a,{id:d,role:b.role||"Slider",showHiddenBounds:false,config:{min:b.min||0,max:b.max||100,now:b.now||0,v2i:function(f,e){if(!b.vertical){return parseInt(e/this.max*($A.xWidth(c)-$A.xWidth(f)))}else{return parseInt(e/this.max*($A.xHeight(c)-$A.xHeight(f)))}},i2v:function(f,e){if(!b.vertical){return parseInt(e/($A.xWidth(c)-$A.xWidth(f))*this.max)}else{return parseInt(e/($A.xHeight(c)-$A.xHeight(f))*this.max)}},degradeLbl:document.createTextNode(b.degradeLbl||"Open Manual Slider")},set:function(){var e=this;e.update.apply(e);e.onDrag.apply(e.accDCObj,[null,null,e,e.config.now,null,true])},update:function(){var e=this,f=$A.xOffset(c);e.css({top:(b.vertical)?f.top+e.config.v2i(e.accDCObj,e.config.now):"",left:(!b.vertical)?f.left+e.config.v2i(e.accDCObj,e.config.now):""})},isDraggable:true,drag:{confineTo:c},onDrag:function(j,f,g,h,e,i){var h=(typeof h==="number"&&h>=0)?h:((!b.vertical)?g.config.i2v(g.accDCObj,$A.xOffset(g.accDCObj).left-$A.xOffset(c).left):g.config.i2v(g.accDCObj,$A.xOffset(g.accDCObj).top-$A.xOffset(c).top));if(g.config.past!=h){g.config.now=g.config.past=h;$A.setAttr(g.accDCObj,{"aria-valuenow":h,"aria-valuetext":(b.valueText&&typeof b.valueText==="function")?b.valueText(g,h):h});if(g.config.manual&&!e){g.config.sel.value=h.toString()}}if(!i&&b.onDrag&&typeof b.onDrag==="function"){b.onDrag.apply(this,[j,f,g,h])}},keyDown:function(g,e){var f=g.which||g.keyCode;if((f>=37&&f<=40)||(f>=33&&f<=36)){if((f==37||f==38)&&e.config.now>e.config.min){e.config.now--}else{if((f==39||f==40)&&e.config.now<e.config.max){e.config.now++}else{if(f==36){e.config.now=e.config.min}else{if(f==35){e.config.now=e.config.max}else{if(f==34){e.config.now=(e.config.now-e.config.inc)>e.config.min?e.config.now-e.config.inc:e.config.min}else{if(f==33){e.config.now=(e.config.now+e.config.inc)<e.config.max?e.config.now+e.config.inc:e.config.max}}}}}}setTimeout(function(){e.update.apply(e);e.onDrag.apply(this,[g,null,e,e.config.now])},1);g.preventDefault()}},runDuring:function(e){$A.setAttr(e.accDCObj,{tabindex:0,role:"slider","aria-orientation":b.vertical?"vertical":"horizontal","aria-label":(b.ariaLabel&&typeof b.ariaLabel==="function")?b.ariaLabel(e):e.role,"aria-valuemin":e.config.min,"aria-valuemax":e.config.max,"aria-valuenow":e.config.now,"aria-valuetext":(b.valueText&&typeof b.valueText==="function")?b.valueText(e,e.config.now):e.config.now})},runAfter:function(e){if(e.config.now){e.update.apply(e);e.onDrag.apply(e.accDCObj,[null,null,e,e.config.now])}e.config.inc=parseInt(e.config.max*0.1);e.config.degrade=$A.createEl("a",{href:"#",tabindex:"-1"},e.sraCSS,null,e.config.degradeLbl);c.appendChild(e.config.degrade);$A.bind(e.config.degrade,{click:function(h){e.config.span=$A.createEl("span",null,{position:"relative",zIndex:1000,backgroundColor:"#000",color:"#f5f5f5"});var g='<select title="'+e.role+'">';for(var f=e.config.min;f<=e.config.max;f++){g+='<option value="'+f+'">'+((b.valueText&&typeof b.valueText==="function")?b.valueText(e,f):f)+"</option>"}g+="</select>";e.config.span.innerHTML=g;c.appendChild(e.config.span);e.config.sel=e.config.span.firstChild;e.config.sel.value=e.config.now.toString();e.config.sel.focus();e.config.degrade.parentNode.removeChild(e.config.degrade);e.config.manual=true;$A.bind(e.config.sel,"keyup blur",function(j){var i=parseInt(e.config.sel.value);if(i!=e.config.now){e.config.now=i;e.update.apply(e);e.onDrag.apply(e.accDCObj,[j,null,e,i,true])}});h.preventDefault()}});$A.bind(window,"resize."+e.id,function(){e.update.apply(e)})},cssObj:{position:"absolute"},className:b.className||"nub"})}})();