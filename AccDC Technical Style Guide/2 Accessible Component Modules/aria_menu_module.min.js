/*!
ARIA Menu Module R2.14
Copyright 2010-2017 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
	*/
!function(){var g={},A=null,h=null;$A.setMenu=function(t,e,i,n,o,r,s){function a(){if($A.query((s.menuTag||"ul")+"."+(s.menuClass||"menu"),u,function(e,t){g[t.id]=t.parentNode.removeChild(t)||g[t.id]}),$A.reg[i]){var e=$A.reg[i];e.fn.sraCSSObj&&e.fn.sraCSSObj.parentNode.removeChild(e.fn.sraCSSObj),e.returnFocus=!1,e.close(),e.returnFocus=!0}$A([{id:i,role:s.role||"Menu",accStart:s.accStart||"",accEnd:s.accEnd||"",controlType:"MenuControl",bind:"popupmenu",trigger:t,handler:c,topLvlId:i,source:g[i],autoPosition:isNaN(s.autoPosition)?3:s.autoPosition,isStatic:"body",append:!0,click:function(e,t){h.pass=!0},runBefore:function(e){$A.find("*",function(e){e.controlType&&"MenuControl"==e.controlType&&e.loaded&&e.close()}),e.offsetLeft="number"==typeof s.offsetLeft?s.offsetLeft:"function"==typeof s.offsetLeft?s.offsetLeft(e):!s.horizontal&&e.parent?-e.parent.accDCObj.offsetWidth/2:0,e.offsetTop="number"==typeof s.offsetTop?s.offsetTop:"function"==typeof s.offsetTop?s.offsetTop(e):s.horizontal?0:-e.triggerObj.offsetHeight},runDuring:function(e){$A.setAttr(e.accDCObj,"role","application"),e.showHiddenBounds&&(e.fn.sraStart.innerHTML=e.fn.sraEnd.innerHTML="",$A.setAttr(e.fn.sraStart,"aria-hidden","true"),$A.setAttr(e.fn.sraEnd,"aria-hidden","true"))},runAfter:f,mouseLeave:function(e,t){"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints||t.close()},runBeforeClose:d,runAfterClose:function(e){h.menuOpen=!1},cssObj:{position:s.overrides&&s.overrides.cssObj&&s.overrides.cssObj.position||"absolute",zIndex:s.overrides&&s.overrides.cssObj&&s.overrides.cssObj.zIndex||1},className:s.containerClass||"menu",ariaLevel:s.ariaLevel||3,tabOut:function(e,t){"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints||t.top.close()},allowCascade:!0}],s.overrides,!0)}var u=o?$A.getEl(e):$A.createEl("div"),c=n||function(){},f=(s=s||{},function(o){o.triggerObj&&o!=o.top&&$A.setAttr(o.triggerObj,"aria-expanded","true"),h.menuOpen=!0,h.currentMenu=o.top,"ontouchstart"in window&&$A.bind(o.accDCObj,"touchstart",function(e){h.pass=!0}),o.mNode=$A.query((s.menuTag||"ul")+"."+(s.menuClass||"menu"),o.containerDiv)[0],ids=[];var e=parseInt($A.getAttr(o.mNode,"data-offsetleft")),t=parseInt($A.getAttr(o.mNode,"data-offsettop")),n=!1,r=$A.getAttr(o.mNode,"data-horizontal"),i=parseInt($A.getAttr(o.mNode,"data-autoposition"));r=r||(s.horizontal?"true":"false"),o.hor="true"===r,isNaN(e)||(o.offsetLeft+=e,n=!0),isNaN(t)||(o.offsetTop+=t,n=!0),isNaN(i)||(o.autoPosition=i,n=!0),n&&o.setPosition(),b((s.menuTag||"ul")+"."+(s.menuClass||"menu"),(s.menuTag||"ul")+"."+(s.menuClass||"menu")+" "+(s.itemTag||"li"),o,s);var a=[];$A.query((s.menuTag||"ul")+"."+(s.menuClass||"menu")+" "+(s.itemTag||"li")+"."+(s.folderClass||"submenu"),o.containerDiv,function(e,t){if(a.push({id:o.id+t.id,role:o.role,accStart:o.accStart,accEnd:o.accEnd,bind:"popupsubmenu",isTab:!0,tabRole:"",tabState:"",trigger:t,handler:c,topLvlId:o.topLvlId+t.id,source:g[o.topLvlId+t.id],autoPosition:isNaN(s.autoPosition)?3:s.autoPosition,runBefore:function(e){e.offsetLeft="number"==typeof s.offsetLeft?s.offsetLeft:"function"==typeof s.offsetLeft?s.offsetLeft(e):!s.horizontal&&e.parent?-e.parent.accDCObj.offsetWidth/2:0,e.offsetTop="number"==typeof s.offsetTop?s.offsetTop:"function"==typeof s.offsetTop?s.offsetTop(e):s.horizontal?0:-e.triggerObj.offsetHeight},runDuring:function(e){$A.setAttr(e.accDCObj,"role","application"),e.showHiddenBounds&&(e.fn.sraStart.innerHTML=e.fn.sraEnd.innerHTML="",$A.setAttr(e.fn.sraStart,"aria-hidden","true"),$A.setAttr(e.fn.sraEnd,"aria-hidden","true"))},runAfter:f,runBeforeClose:d,cssObj:{position:s.overrides&&s.overrides.cssObj&&s.overrides.cssObj.position||"relative",zIndex:o.cssObj.zIndex+1},className:s.containerClass||"menu",ariaLevel:o.ariaLevel+1,tabOut:o.tabOut,allowCascade:!0}),$A.setAttr(t,{"aria-haspopup":"true","aria-expanded":"false"}),$A.reg[o.id+t.id]){var n=$A.reg[o.id+t.id];n.fn.sraCSSObj&&n.fn.sraCSSObj.parentNode.removeChild(n.fn.sraCSSObj),n.returnFocus=!1,n.close(),n.returnFocus=!0}ids.push(t.id)}),$A(o,a,s.overrides),$A.query((s.menuTag||"ul")+"."+(s.menuClass||"menu")+" "+(s.itemTag||"li")+"."+(s.linkClass||"link"),o.containerDiv,function(e,t){$A.internal.data(t,"isset")||($A.internal.data(t,"isset",!0),$A.bind(t,"menulink",function(e){if(o.top.close(),o.handler&&"function"==typeof o.handler)return o.handler.apply(this,[e,o])}),
// if (o.parentNode != dc.mNode)
ids.push(t.id))}),ids.length&&$A.setAttr(o.mNode,"aria-owns",ids.join(" ")),o!=o.top&&o.parent&&o.parent.iNodes&&o.triggerObj&&$A.setAttr(o.triggerObj,"tabindex","-1"),o==o.top&&($A.bind("body","focusin.accmenu",function(e){o.tempFocus?o.tempFocus=null:"ontouchstart"in window||o.top.close()}),$A.bind(o.accDCObj,"focusin",function(e){o.tempFocus=this}))}),d=function(e){if(e.triggerObj&&e!=e.top&&$A.setAttr(e.triggerObj,"aria-expanded","false"),e.children.length)for(var t=0;t<e.children.length;t++)e.children[t].close();e.iNodes&&e.iNodes.length&&$A.unbind(e.iNodes,"click keydown popupsubmenu menulink"),e!=e.top&&e.parent&&e.parent.iNodes&&e.triggerObj&&$A.setAttr(e.triggerObj,"tabindex","0"),e==e.top&&$A.unbind("body","focusin.accmenu")};if(o?a():$A.load(u,e,a),s.rightClick&&s.rightClickText&&!("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)){var l="rc"+$A.genId(),p=$A.createEl("div",{id:l,role:"tooltip"},{display:"none"});p.innerHTML=s.rightClickText,document.body.appendChild(p)}"function"!=typeof h&&((h=function(e){h.pass||A&&A.pass||!h.menuOpen||h.currentMenu&&h.currentMenu.id&&h.currentMenu.loaded&&h.currentMenu.close(),h&&(h.pass=!1),A&&(A.pass=!1)}).menuOpen=h.pass=!1,$A.bind(document,"click touchstart",h)),s.rightClick&&"function"!=typeof A&&((A=function(e){A.pass&&e.preventDefault(),A.pass=!1}).pass=!1,$A.bind(document,"contextmenu",A)),$A.query(t,r,function(e,n){if("body"!=n.nodeName.toLowerCase()&&$A.setAttr(n,"aria-haspopup","true"),l&&$(n,l),s.rightClick){if($A.bind(n,{contextmenu:function(e){e.preventDefault(),A&&(A.pass=!0)},mouseup:function(e){2==(null==e.which?e.button<2?1:4==e.button?3:2:e.which<2?1:2==e.which?3:2)&&(A&&(A.pass=!0),$A.reg[i].loaded?$A.reg[i].close():($A.reg[i].event=e,$A.trigger(n,"popupmenu")),e.preventDefault())},keydown:function(e){var t=e.which||e.keyCode;(93==t||e.shiftKey&&121==t)&&(A&&(A.pass=!0),$A.trigger(n,"popupmenu"),e.preventDefault())}}),"ontouchstart"in window){var t=0,o=0,r=!1;$A.bind(n,{touchstart:function(e){t=(new Date).getTime()+2e3},touchend:function(e){o=(new Date).getTime(),t<o?(r=!0,e.stopPropagation(),e.preventDefault(),$A.trigger(n,"popupmenu")):r=!1},click:function(e){r&&(r=!1,e.stopPropagation(),e.preventDefault())}})}}else $A.bind(n,{keydown:function(e){var t=e.which||e.keyCode;40!=t&&13!=t&&32!=t||($A.trigger(n,"popupmenu"),e.stopPropagation(),e.preventDefault())},click:function(e){h.pass=!0,$A.reg[i].loaded?$A.reg[i].close():$A.trigger(n,"popupmenu"),e.preventDefault()}});$A.bind(n,{closepopupmenu:function(e){$A.reg[i].loaded&&$A.reg[i].close()}})})};var b=function(e,t,n,o){var r=0,i=[];$A.query(e,n.containerDiv,function(e,t){$A.setAttr(t,"role",n.hor?"menubar":"menu")});var a=function(){for(var e=s.length-1;0<=e;e--)s[e].id==this.id&&(r=e),$A.setAttr(s[e],{tabindex:-1});$A.setAttr(this,{tabindex:"0"}).focus()},s=n.iNodes=$A.query(t,n.containerDiv,function(e,t){i.push($A.getText(t)),$A.setAttr(t,{role:"menuitem","aria-posinset":e+1,tabindex:-1}),$A.bind(t,{keydown:function(e){var t=e.which||e.keyCode;27==t?(n.close(),e.stopPropagation(),e.preventDefault()):13==t?($A.hasClass(this,o.folderClass||"submenu")?"true"!=$A.getAttr(this,"aria-disabled")?$A.trigger(this,"popupsubmenu"):n.top.close():$A.trigger(this,"menulink"),e.stopPropagation(),e.preventDefault()):37<=t&&t<=40?(e.preventDefault(),e.stopPropagation(),n!=n.top&&(37==t&&!n.hor||38==t&&n.hor)?n.close():39==t&&!n.hor||40==t&&n.hor?$A.hasClass(this,o.folderClass||"submenu")&&"true"!=$A.getAttr(this,"aria-disabled")&&$A.trigger(this,"popupsubmenu"):38==t&&!n.hor||37==t&&n.hor?r=r<=0?s.length-1:r-1:(40==t&&!n.hor||39==t&&n.hor)&&(r=r>=s.length-1?0:r+1),(38!=t&&40!=t||n.hor)&&(37!=t&&39!=t||!n.hor)||(s[r]&&1===s[r].nodeType||(r=0),s.length&&a.apply(s[r]))):(48<=t&&t<=57||65<=t&&t<=90)&&(function(e){for(var t=r+1;t<=s.length-1;t++)if(e.toLowerCase()==i[t].replace(/^\s+|\s+$/g,"").substring(0,1).toLowerCase())return r=t,a.apply(s[r]);for(t=0;t<r;t++)if(e.toLowerCase()==i[t].replace(/^\s+|\s+$/g,"").substring(0,1).toLowerCase())return r=t,a.apply(s[r])}(String.fromCharCode(t)),e.stopPropagation(),e.preventDefault())},click:function(e){$A.hasClass(this,o.folderClass||"submenu")?"true"!=$A.getAttr(this,"aria-disabled")?$A.trigger(this,"popupsubmenu"):n.top.close():$A.trigger(this,"menulink"),e.preventDefault()}})});$A.query(s,function(e,t){$A.setAttr(t,"aria-setsize",s.length)}),a.apply(s[r])},$=function(e,t){if(!e)return null;for(var n=$A.isArray(e)?e:[e],o=t.split(" "),r=0;r<n.length;r++)for(var i=0;i<o.length;i++)if(!s(n[r],o[i])){var a=$A.getAttr(n[r],"aria-describedby");a=a||"",$A.setAttr(n[r],"aria-describedby",(a+" "+o[i]).replace(/^\s+|\s+$/g,""))}return e},s=function(e,t){var n=$A.getAttr(e,"aria-describedby");if(!e||!n)return!1;for(var o=t.split(" "),r=0,i=0;i<o.length;i++)-1!==n.indexOf(o[i])&&(r+=1);return r===o.length};$A.bind(window,"resize",function(){$A.find("*",function(e){e.controlType&&"MenuControl"==e.controlType&&e.loaded&&e.close()})})}();