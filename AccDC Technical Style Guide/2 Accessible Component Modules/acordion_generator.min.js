/*
Accordion Generator Module R2.1
Copyright 2010-2013 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.generateAccordion=function(c,g,e,h){var f=[],d=[],e=e||document,b=$A.query(c,e,function(k,m){if($A.reg[m.id]){var p=$A.reg[m.id];if(p.fn.sraCSSObj){p.fn.sraCSSObj.parentNode.removeChild(p.fn.sraCSSObj)}p.returnFocus=false;p.close();p.returnFocus=true}var n=m.id||$A.genId(),j={},l=$A.getAttr(m,"data-internal");j.id=n;j.role=$A.getAttr(m,"data-role")||"Accordion";j.autoStart=$A.getAttr(m,"data-defaultopen")?true:false;j.trigger=m;j.mode=typeof g.mode==="number"?g.mode:(g.preload?0:1);j.source=l?(function(){var i=$A.getEl(l);if(i){return i.parentNode.removeChild(i)}else{return $A.reg[m.id]&&$A.reg[m.id].source}})():(function(){var o=$A.createEl("div"),i=$A.getAttr(m,"data-src");i=i.replace("#"," #");if(g.preload){$A.load(o,i,function(){if(g.preloadImages){if(!$A.getEl(a)){document.body.appendChild($A.createEl("div",{id:a},$A.sraCSS))}g.imgLoader=$A.getEl(a);$A.query("img",o,function(q,r){if(r.src&&$A.query('img[src="'+r.src+'"]',g.imgLoader).length<1){g.imgLoader.appendChild($A.createEl("img",{src:r.src,alt:""}))}})}});return o}else{return i}})();j.isStatic="#"+$A.getAttr(m,"data-insert");j.showHiddenBounds=g.showHiddenBounds||false;j.bind="click";j.isTab=true;j.tabRole=g.accordionRole||"Accordion";j.tabState=g.accordionState||"Expanded";j.toggleClass=g.toggleClass||"open";j.isToggle=typeof g.isToggle==="boolean"?g.isToggle:true;j.allowCascade=true;j.runDuring=function(i){$A.setAttr(i.accDCObj,"role","region")};j.runAfter=function(i){$A.addClass(i.triggerObj,i.toggleClass);if(h&&typeof h==="function"){h.apply(i.triggerObj,[i])}};j.runAfterClose=function(i){$A.remClass(i.triggerObj,i.toggleClass);if(h&&typeof h==="function"){h.apply(i.triggerObj,[i])}};$A.setAttr(m,{tabindex:"0"});$A.bind(m,"keydown",function(o){var i=o.which||o.keyCode;if(i==13||i==32){$A.trigger(m,"click");o.preventDefault()}});d.push(j);f.push(n)});$A(d,g);return f};var a="i"+$A.genId()})();