/*!
Modal Module R1.12
Copyright 2020 Bryan Garaventa (WhatSock.com)
Refactoring Contributions Copyright 2018 Danny Allen (dannya.com) / Wonderscore Ltd (wonderscore.co.uk)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
!function(){var i=[];$A.setModal=function(n){var e;return n&&!n.id&&(n.id=$A.genId()),"number"!=typeof n.mode&&(n.source=(e=$A.createEl("div"),$A.load(e,n.source),e)),$A([n],{role:"Dialog",bind:"click",forceFocus:!1,isStatic:"body",append:!0,showHiddenBounds:!1,accClose:"Close",autoFix:9,allowCascade:!0,runDuring:function(e){if($A.query("body > *",function(){$A.setAttr(this,"aria-hidden","true")}),$A.addClass(e.containerDiv,"containerDiv"),$A.setAttr(e.containerDiv,"tabindex","-1"),e.firstField=$A.query('*[data-first="true"]',e.containerDiv)[0]||e.containerDiv,e.lastField=$A.query('*[data-last="true"]',e.containerDiv)[0]||e.containerDiv,n.ariaDialog){$A.setAttr(e.accDCObj,{role:"dialog","aria-label":e.role,"aria-modal":"true"});var i="";$A.query("*[data-description]",e.containerDiv,function(e,t){t.id||(t.id=$A.genId()),i+=(i?" ":"")+t.id}),i&&$A.setAttr(e.accDCObj,"aria-describedby",i)}else $A.setAttr(e.accDCObj,{role:"region","aria-label":e.role})},runAfter:function(t){i.length||($A.bind(window,"resize.accmodal",function(e){t.reposition()}),$A.bind("body","focusin.accmodal",function(e){i[i.length-1].tempFocus?i[i.length-1].tempFocus=null:i[i.length-1].lastField&&!i[i.length-1].forwardTab?i[i.length-1].lastField.focus():i[i.length-1].firstField&&i[i.length-1].forwardTab&&i[i.length-1].firstField.focus()})),i.push(t),n.alertDialog&&$A.announce(t.containerDiv,!1,!0),i[i.length-1].firstField&&i[i.length-1].firstField.focus()},runBeforeClose:function(e){i.pop(),i.length||($A.unbind(window,".accmodal"),$A.unbind("body",".accmodal")),i.length?($A.setAttr(i[i.length-1].accDCObj,"aria-hidden","false"),$A.remAttr(i[i.length-1].accDCObj,"aria-hidden")):$A.query("body > *",function(){$A.setAttr(this,"aria-hidden","false"),$A.remAttr(this,"aria-hidden")}),$A.query("*",e.containerDiv,function(e,t){$A.unbind(t,"*")})},reposition:function(e){return!!i.length&&(i[i.length-1].autoFix?i[i.length-1].applyFix():i[i.length-1].autoPosition&&i[i.length-1].setPosition(),"function"==typeof e&&e(i[i.length-1]),!0)},focusIn:function(e,t){t.tempFocus=this},keyDown:function(e,t){var i=e.which||e.keyCode;27===i?t.close():9===i&&(t.forwardTab=!e.shiftKey,e.target!==t.lastField||e.shiftKey||t.lastField===t.firstField||t.lastField===t.containerDiv?e.target===t.firstField&&e.shiftKey&&(t.lastField.focus(),e.preventDefault()):(t.firstField.focus(),e.preventDefault()))},closeClassName:"lbClose",className:"modal"},!0),n.id}}();