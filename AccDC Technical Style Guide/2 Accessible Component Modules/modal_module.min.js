/*!
Modal Module R1.10
Copyright 2010-2018 Bryan Garaventa (WhatSock.com)
Refactoring Contributions Copyright 2018 Danny Allen (dannya.com) / Wonderscore Ltd (wonderscore.co.uk)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
!function(){var i=[];$A.setModal=function(e){var t;return e&&!e.id&&(e.id=$A.genId()),"number"!=typeof e.mode&&(e.source=(t=$A.createEl("div"),$A.load(t,e.source),t)),$A([e],{role:"Dialog",bind:"click",forceFocus:!0,isStatic:"body",append:!0,accStart:"Start",accEnd:"End",accClose:"Close",autoFix:9,allowCascade:!0,runDuring:function(t){$A.query("body > *",function(){$A.setAttr(this,"aria-hidden","true")}),$A.addClass(t.containerDiv,"containerDiv"),t.firstField=$A.query('*[data-first="true"]',t.containerDiv)[0],t.lastField=$A.query('*[data-last="true"]',t.containerDiv)[0],$A.remAttr($A.setAttr(t.fn.closeLink,{tabindex:"0",role:"presentation"}),"href").innerHTML="",e.ariaDialog?$A.setAttr(t.accDCObj,{role:"dialog","aria-label":t.role,"aria-describedby":t.containerDivId,"aria-modal":"true"}):$A.setAttr(t.accDCObj,{role:"region","aria-label":t.role}),t.fn.sraStart.innerHTML=t.fn.sraEnd.innerHTML="",$A.setAttr(t.fn.sraStart,{"aria-hidden":"true"}),$A.setAttr(t.fn.sraEnd,{"aria-hidden":"true"}),e.alertDialog&&(t.announce=!1)},runAfter:function(n){i.length||($A.bind(window,"resize.accmodal",function(t){n.reposition()}),$A.bind("body","focusin.accmodal",function(t){i[i.length-1].tempFocus?i[i.length-1].tempFocus=null:i[i.length-1].lastField&&i[i.length-1].lastField.focus()})),i.push(n),e.alertDialog&&$A.announce(n.containerDiv,!1,!0)},runBeforeClose:function(t){i.pop(),i.length||($A.unbind(window,".accmodal"),$A.unbind("body",".accmodal")),i.length?($A.setAttr(i[i.length-1].accDCObj,"aria-hidden","false"),$A.remAttr(i[i.length-1].accDCObj,"aria-hidden")):$A.query("body > *",function(){$A.setAttr(this,"aria-hidden","false"),$A.remAttr(this,"aria-hidden")}),$A.query("*",t.containerDiv,function(t,n){$A.unbind(n,"*")})},reposition:function(t){return!!i.length&&(i[i.length-1].autoFix?i[i.length-1].applyFix():i[i.length-1].autoPosition&&i[i.length-1].setPosition(),"function"==typeof t&&t(i[i.length-1]),!0)},focusIn:function(t,n){n.tempFocus=this},tabOut:function(t,n){n.firstField&&n.firstField.focus()},keyDown:function(t,n){27==(t.which||t.keyCode)&&n.close()},closeClassName:"lbClose",className:"modal"},!0),e.id}}();